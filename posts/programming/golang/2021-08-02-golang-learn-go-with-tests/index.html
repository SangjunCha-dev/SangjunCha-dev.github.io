<!doctype html><html>
<head>
<title>golang learn-go-with-tests GitBook 정리</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=/css/bootstrap.min.css>
<link rel=stylesheet href=/css/layouts/main.css>
<link rel=stylesheet href=/css/navigators/navbar.css>
<link rel=stylesheet href=/css/plyr.css>
<link rel=stylesheet href=/css/flag-icon.min.css>
<link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css>
<meta property="og:title" content="golang learn-go-with-tests GitBook 정리">
<meta property="og:description" content="golang learn-go-with-tests GitBook 정리">
<meta property="og:type" content="article">
<meta property="og:url" content="https://sangjuncha-dev.github.io/posts/programming/golang/2021-08-02-golang-learn-go-with-tests/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-02T17:56:14+09:00">
<meta property="article:modified_time" content="2021-08-02T17:56:14+09:00">
<meta name=description content="golang learn-go-with-tests GitBook 정리">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css>
<link rel=stylesheet href=/css/layouts/single.css>
<link rel=stylesheet href=/css/navigators/sidebar.css>
<link rel=stylesheet href=/css/style.css>
</head>
<body data-spy=scroll data-target=#TableOfContents data-offset=80>
<div class="container-fluid bg-dimmed wrapper">
<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
<div class=container>
<button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span>
</button>
<a class=navbar-brand href=/>
Sangjun 개발 블로그</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse lang-selector" id=top-nav-items>
<ul class="navbar-nav ml-auto">
</ul>
</div>
</div>
</nav>
<section class=sidebar-section id=sidebar-section>
<div class=sidebar-holder>
<div class=sidebar id=sidebar>
<form class=mx-auto method=get action=/search>
<input type=text name=keyword placeholder=Search data-search id=search-box>
</form>
<div class=sidebar-tree>
<ul class=tree id=tree>
<li id=list-heading><a href=/posts data-filter=all>게시글</a></li>
<div class=subtree>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/algorithm/>algorithm</a>
<ul>
<li><a href=/posts/algorithm/leetcode/ title=leetcode>leetcode</a></li>
<li><a href=/posts/algorithm/programmers/ title=programmers>programmers</a></li>
</ul>
</li>
<li><a href=/posts/db/ title=db>db</a></li>
<li><a href=/posts/docker/ title=docker>docker</a></li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/framework/>framework</a>
<ul>
<li><a href=/posts/framework/django/ title=django>django</a></li>
</ul>
</li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/os/>os</a>
<ul>
<li><a href=/posts/os/linux/ title=linux>linux</a></li>
<li><a href=/posts/os/windows/ title=windows>windows</a></li>
</ul>
</li>
<li>
<i class="fas fa-minus-circle"></i><a class=active href=/posts/programming/>programming</a>
<ul class=active>
<li><a class=active href=/posts/programming/golang/ title=golang>golang</a></li>
<li><a href=/posts/programming/python/ title=python>python</a></li>
</ul>
</li>
</div>
</ul>
</div>
</div>
</div>
</section>
<section class=content-section id=content-section>
<div class=content>
<div class="container p-0 read-area">
<div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://sangjuncha-dev.github.io/images/default-hero.jpg)>
</div>
<div class=page-content>
<div class="author-profile ml-auto align-self-lg-center">
<img class=rounded-circle src=/images/author/author_hubdaa05e9d050aba742615dd0c3c3a3a1_51368_120x120_fit_box_3.png alt="Author Image">
<h5 class=author-name>Sangjun</h5>
<p>August 2, 2021</p>
</div>
<div class=title>
<h1>golang learn-go-with-tests GitBook 정리</h1>
</div>
<div class=post-content id=post-content>
<h1 id=사이트-주소>사이트 주소</h1>
<p><a href=https://github.com/quii/learn-go-with-tests>원본 링크</a><br>
<a href=https://github.com/MiryangJung/learn-go-with-tests-ko>한글 번역 링크</a></p>
<h1 id=5-struct-method--interface>5. struct, method & interface</h1>
<h2 id=struct>struct</h2>
<p>구조체의 변수 첫글자는 대문자여야한다. (외부에서 사용 가능하도록)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>Width</span>  <span style=color:#66d9ef>float64</span>
	<span style=color:#a6e22e>Height</span> <span style=color:#66d9ef>float64</span>
}
</code></pre></div><p>구조체 필드이름을 선택적으로 지정할 수 있다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{<span style=color:#a6e22e>shape</span>: <span style=color:#a6e22e>Rectangle</span>{<span style=color:#a6e22e>Width</span>: <span style=color:#ae81ff>12</span>, <span style=color:#a6e22e>Height</span>: <span style=color:#ae81ff>6</span>}, <span style=color:#a6e22e>want</span>: <span style=color:#ae81ff>72.0</span>},
{<span style=color:#a6e22e>shape</span>: <span style=color:#a6e22e>Circle</span>{<span style=color:#a6e22e>Radius</span>: <span style=color:#ae81ff>10</span>}, <span style=color:#a6e22e>want</span>: <span style=color:#ae81ff>314.1592653589793</span>},
</code></pre></div><h2 id=methods>methods</h2>
<p>func (receiverName ReceiverType) MethodName(args)
<code>r Rectangle</code> 수신자 변수를 유형의 첫 번째 문자로 지정하는 것이 Go의 관례이다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#a6e22e>Rectangle</span>) <span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
}
</code></pre></div><h2 id=interface>interface</h2>
<p>Go에서 인터페이스 자료형은 암시적 이다. 전달하는 유형이 인터페이스가 요청하는 유형과 일치하면 컴파일 된다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Shape</span> <span style=color:#66d9ef>interface</span> {
	<span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span>
}
</code></pre></div><h2 id=익명구조>익명구조</h2>
<p>익명구조 예시로 shape와 want라는 두 개의 필드가 있는 []struct를 사용하여 구조체를 선언한다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>areaTests</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>shape</span> <span style=color:#a6e22e>Shape</span>
	<span style=color:#a6e22e>want</span>  <span style=color:#66d9ef>float64</span>
}{
	{<span style=color:#a6e22e>Rectangle</span>{<span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>6</span>}, <span style=color:#ae81ff>72.0</span>},
	{<span style=color:#a6e22e>Circle</span>{<span style=color:#ae81ff>10</span>}, <span style=color:#ae81ff>314.1592653589793</span>},
}
</code></pre></div><h2 id=예제-코드>예제 코드</h2>
<p>struct_method_interface_test.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;math&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>Width</span>  <span style=color:#66d9ef>float64</span>
	<span style=color:#a6e22e>Height</span> <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#a6e22e>Rectangle</span>) <span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Width</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Height</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Circle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>Radius</span> <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#a6e22e>Circle</span>) <span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Pi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Radius</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Radius</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Triangle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>Base</span>   <span style=color:#66d9ef>float64</span>
	<span style=color:#a6e22e>Height</span> <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>Triangle</span>) <span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Base</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Height</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Shape</span> <span style=color:#66d9ef>interface</span> {
	<span style=color:#a6e22e>Area</span>() <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestArea</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>areaTests</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>struct</span> {
		<span style=color:#a6e22e>name</span>    <span style=color:#66d9ef>string</span>
		<span style=color:#a6e22e>shape</span>   <span style=color:#a6e22e>Shape</span>
		<span style=color:#a6e22e>hasArea</span> <span style=color:#66d9ef>float64</span>
	}{
		{<span style=color:#a6e22e>shape</span>: <span style=color:#a6e22e>Rectangle</span>{<span style=color:#a6e22e>Width</span>: <span style=color:#ae81ff>12</span>, <span style=color:#a6e22e>Height</span>: <span style=color:#ae81ff>6</span>}, <span style=color:#a6e22e>hasArea</span>: <span style=color:#ae81ff>72.0</span>},
		{<span style=color:#a6e22e>shape</span>: <span style=color:#a6e22e>Circle</span>{<span style=color:#a6e22e>Radius</span>: <span style=color:#ae81ff>10</span>}, <span style=color:#a6e22e>hasArea</span>: <span style=color:#ae81ff>314.1592653589793</span>},
		{<span style=color:#a6e22e>shape</span>: <span style=color:#a6e22e>Triangle</span>{<span style=color:#a6e22e>Base</span>: <span style=color:#ae81ff>12</span>, <span style=color:#a6e22e>Height</span>: <span style=color:#ae81ff>6</span>}, <span style=color:#a6e22e>hasArea</span>: <span style=color:#ae81ff>36.0</span>},
	}

	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>tt</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>areaTests</span> {
		<span style=color:#a6e22e>got</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tt</span>.<span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>Area</span>()
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>tt</span>.<span style=color:#a6e22e>hasArea</span> {
			<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;%#v got %g want %g&#34;</span>, <span style=color:#a6e22e>tt</span>.<span style=color:#a6e22e>shape</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>tt</span>.<span style=color:#a6e22e>hasArea</span>)
		}
	}
}
</code></pre></div><h1 id=6-pointer--error>6. pointer & error</h1>
<h2 id=pointer>Pointer</h2>
<p>구조체에 대한 포인터는 구조체 포인터 라고 불리고 특별한 역참조에 대한 명시 없이도 <code>자동 역참조</code>가 된다. <code>(*w).balance</code> 와 <code>w.balance</code> 는 같은 의미로 사용된다.</p>
<h2 id=error>Error</h2>
<p>반환되는 에러를 확인하지 않은 코드라인을 확인할 수 있는 라이브러리 설치
<code>go get -u github.com/kisielk/errcheck</code>
실행 명령 : <code>errcheck .</code></p>
<h2 id=예제-코드-1>예제 코드</h2>
<p>pointer_error_test.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;errors&#34;</span>
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Bitcoin</span> <span style=color:#66d9ef>int</span>

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>b</span> <span style=color:#a6e22e>Bitcoin</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%d BTC&#34;</span>, <span style=color:#a6e22e>b</span>)
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Stringer</span> <span style=color:#66d9ef>interface</span> {
	<span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Wallet</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>balance</span> <span style=color:#a6e22e>Bitcoin</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>w</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Wallet</span>) <span style=color:#a6e22e>Deposit</span>(<span style=color:#a6e22e>amount</span> <span style=color:#a6e22e>Bitcoin</span>) {
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;address of balance in Deposit is %v \n&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>balance</span>)
	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>balance</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>amount</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>w</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Wallet</span>) <span style=color:#a6e22e>Balance</span>() <span style=color:#a6e22e>Bitcoin</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>balance</span>
}

<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ErrInsufficientFunds</span> = <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#e6db74>&#34;cannot withdraw, insufficient funds&#34;</span>)

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>w</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Wallet</span>) <span style=color:#a6e22e>Withdraw</span>(<span style=color:#a6e22e>amount</span> <span style=color:#a6e22e>Bitcoin</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>balance</span> &lt; <span style=color:#a6e22e>amount</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ErrInsufficientFunds</span>
	}

	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>balance</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>amount</span>
	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestWallet</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Deposit&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>wallet</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Wallet</span>{}
		<span style=color:#a6e22e>wallet</span>.<span style=color:#a6e22e>Deposit</span>(<span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>10</span>))
		<span style=color:#a6e22e>assertBalance</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>wallet</span>, <span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>10</span>))
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Withdraw&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>wallet</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Wallet</span>{<span style=color:#a6e22e>balance</span>: <span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>20</span>)}
		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>wallet</span>.<span style=color:#a6e22e>Withdraw</span>(<span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>10</span>))

		<span style=color:#a6e22e>assertBalance</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>wallet</span>, <span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>10</span>))
		<span style=color:#a6e22e>assertNoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Withdraw insufficient funds&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>startingBalance</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>20</span>)
		<span style=color:#a6e22e>wallet</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Wallet</span>{<span style=color:#a6e22e>startingBalance</span>}
		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>wallet</span>.<span style=color:#a6e22e>Withdraw</span>(<span style=color:#a6e22e>Bitcoin</span>(<span style=color:#ae81ff>100</span>))

		<span style=color:#a6e22e>assertBalance</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>wallet</span>, <span style=color:#a6e22e>startingBalance</span>)
		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>ErrInsufficientFunds</span>)
	})
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertBalance</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>wallet</span> <span style=color:#a6e22e>Wallet</span>, <span style=color:#a6e22e>want</span> <span style=color:#a6e22e>Bitcoin</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()
	<span style=color:#a6e22e>got</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>wallet</span>.<span style=color:#a6e22e>Balance</span>()

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertNoError</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>got</span> <span style=color:#66d9ef>error</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#e6db74>&#34;got an error but didn&#39;t want one&#34;</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>got</span> <span style=color:#66d9ef>error</span>, <span style=color:#a6e22e>want</span> <span style=color:#66d9ef>error</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#e6db74>&#34;want on error but didn&#39;t get one&#34;</span>)
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q, want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	}
}
</code></pre></div><h1 id=7-map>7. map</h1>
<h2 id=map>map</h2>
<p>맵을 선언하려면 map이라는 키워드로 시작하고 두 개의 타입이 있어야한다.<br>
첫번째 타입 : key 타입으로 비교 가능한 타입만 사용 가능하다.<br>
두번째 타입 : value 타입으로 어떤타입이든 사용 가능하다.</p>
<p>map은 두 개의 값을 반환하며 두번째 값은 키를 찾는데 성공 여부를 boolean으로 반환한다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>definition</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>d</span>[<span style=color:#a6e22e>word</span>]
</code></pre></div><h2 id=error-1>error</h2>
<p>Error는 .Error() 메소드를 통해 문자열로 변환될 수 있다.</p>
<h2 id=pointer-1>pointer</h2>
<p>map의 주소를 전달(&myMap)하지 않고서도 수정할 수 있다</p>
<h2 id=map-초기화-방법>map 초기화 방법</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dictionary</span> = <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{}

<span style=color:#75715e>// OR
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dictionary</span> = make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>)
</code></pre></div><h2 id=예제-코드-2>예제 코드</h2>
<p>dictionary_test.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
<span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>const</span> (
	<span style=color:#a6e22e>ErrNotFound</span>         = <span style=color:#a6e22e>DictionaryErr</span>(<span style=color:#e6db74>&#34;could not find the word you were looking for&#34;</span>)
	<span style=color:#a6e22e>ErrWordExists</span>       = <span style=color:#a6e22e>DictionaryErr</span>(<span style=color:#e6db74>&#34;cannot add word because it already exists&#34;</span>)
	<span style=color:#a6e22e>ErrWordDoesNotExist</span> = <span style=color:#a6e22e>DictionaryErr</span>(<span style=color:#e6db74>&#34;cannot update word because it does not exist&#34;</span>)
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>DictionaryErr</span> <span style=color:#66d9ef>string</span>

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#a6e22e>DictionaryErr</span>) <span style=color:#a6e22e>Error</span>() <span style=color:#66d9ef>string</span> {
	<span style=color:#66d9ef>return</span> string(<span style=color:#a6e22e>e</span>)
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Dictionary</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Dictionary</span>) <span style=color:#a6e22e>Search</span>(<span style=color:#a6e22e>word</span> <span style=color:#66d9ef>string</span>) (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>error</span>) {
	<span style=color:#a6e22e>definition</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>d</span>[<span style=color:#a6e22e>word</span>]
	<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>ok</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#a6e22e>ErrNotFound</span>
	}
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>definition</span>, <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Dictionary</span>) <span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#a6e22e>word</span>)

	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>err</span> {
	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>ErrNotFound</span>:
		<span style=color:#a6e22e>d</span>[<span style=color:#a6e22e>word</span>] = <span style=color:#a6e22e>definition</span>
	<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>nil</span>:
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ErrWordExists</span>
	<span style=color:#66d9ef>default</span>:
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
	}

	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Dictionary</span>) <span style=color:#a6e22e>Update</span>(<span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#a6e22e>word</span>)

	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>err</span> {
	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>ErrNotFound</span>:
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ErrWordDoesNotExist</span>
	<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>nil</span>:
		<span style=color:#a6e22e>d</span>[<span style=color:#a6e22e>word</span>] = <span style=color:#a6e22e>definition</span>
	<span style=color:#66d9ef>default</span>:
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
	}

	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Dictionary</span>) <span style=color:#a6e22e>Delete</span>(<span style=color:#a6e22e>word</span> <span style=color:#66d9ef>string</span>) {
	delete(<span style=color:#a6e22e>d</span>, <span style=color:#a6e22e>word</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestSearch</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{<span style=color:#e6db74>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;this is just a test&#34;</span>}

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;known word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#e6db74>&#34;test&#34;</span>)
		<span style=color:#a6e22e>want</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;this is just a test&#34;</span>

		<span style=color:#a6e22e>assertStrings</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;unknown word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>got</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#e6db74>&#34;unknown&#34;</span>)

		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>ErrNotFound</span>)
	})
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestAdd</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;new word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{}
		<span style=color:#a6e22e>word</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>
		<span style=color:#a6e22e>definition</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;this is just a test&#34;</span>

		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span>)

		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#66d9ef>nil</span>)
		<span style=color:#a6e22e>assertDefinition</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>dictionary</span>, <span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span>)
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;existing word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>word</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>
		<span style=color:#a6e22e>definition</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;this is just a test&#34;</span>
		<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{<span style=color:#a6e22e>word</span>: <span style=color:#a6e22e>definition</span>}
		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>word</span>, <span style=color:#e6db74>&#34;new test&#34;</span>)

		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>ErrWordExists</span>)
		<span style=color:#a6e22e>assertDefinition</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>dictionary</span>, <span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span>)
	})
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestUpdate</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;existing word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>word</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>
		<span style=color:#a6e22e>definition</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;this is just a test&#34;</span>
		<span style=color:#a6e22e>newDefinition</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;new definition&#34;</span>
		<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{<span style=color:#a6e22e>word</span>: <span style=color:#a6e22e>definition</span>}

		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Update</span>(<span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>newDefinition</span>)

		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#66d9ef>nil</span>)
		<span style=color:#a6e22e>assertDefinition</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>dictionary</span>, <span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>newDefinition</span>)
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;new word&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>word</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>
		<span style=color:#a6e22e>definition</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;this is just a test&#34;</span>
		<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{}

		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Update</span>(<span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span>)

		<span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>ErrWordExists</span>)
	})
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestDelete</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>word</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>
	<span style=color:#a6e22e>dictionary</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Dictionary</span>{<span style=color:#a6e22e>word</span>: <span style=color:#e6db74>&#34;test definition&#34;</span>}

	<span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Delete</span>(<span style=color:#a6e22e>word</span>)

	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#a6e22e>word</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>ErrNotFound</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;Expected %q to be deleted&#34;</span>, <span style=color:#a6e22e>word</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertStrings</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span> <span style=color:#66d9ef>string</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertError</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span> <span style=color:#66d9ef>error</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>assertDefinition</span>(<span style=color:#a6e22e>t</span> <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>TB</span>, <span style=color:#a6e22e>dictionary</span> <span style=color:#a6e22e>Dictionary</span>, <span style=color:#a6e22e>word</span>, <span style=color:#a6e22e>definition</span> <span style=color:#66d9ef>string</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Helper</span>()

	<span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dictionary</span>.<span style=color:#a6e22e>Search</span>(<span style=color:#a6e22e>word</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#e6db74>&#34;should find added word :&#34;</span>, <span style=color:#a6e22e>err</span>)
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>definition</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>got</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>definition</span>)
	}
}
</code></pre></div><h1 id=8-dependency-injection>8. dependency injection</h1>
<p><code>fmt.Printf</code> : 기본적으로 stdout을 사용한다.<br>
<code>fmt.Fprintf</code> : fmt.Printf와 비슷하지만, 문자열을 보낼 곳 Writer를 가진다.</p>
<h2 id=특징>특징</h2>
<ul>
<li>프레임워크가 필요하지 않다.</li>
<li>디자인을 지나치게 복잡하게 하지 않는다.</li>
<li>테스트를 용이하게 한다.</li>
<li>범용 함수를 작성할 수 있다.</li>
</ul>
<h2 id=예제코드>예제코드</h2>
<p>di_test.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;bytes&#34;</span>
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;io&#34;</span>
	<span style=color:#e6db74>&#34;net/http&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Greet</span>(<span style=color:#a6e22e>writer</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>, <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>) {
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>writer</span>, <span style=color:#e6db74>&#34;Hello, %s&#34;</span>, <span style=color:#a6e22e>name</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>MyGreeterHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
	<span style=color:#a6e22e>Greet</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;world&#34;</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestGreat</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>buffer</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>Buffer</span>{}
	<span style=color:#a6e22e>Greet</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>buffer</span>, <span style=color:#e6db74>&#34;Chris&#34;</span>)

	<span style=color:#a6e22e>got</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>buffer</span>.<span style=color:#a6e22e>String</span>()
	<span style=color:#a6e22e>want</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Hello, Chris&#34;</span>

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:5000&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandlerFunc</span>(<span style=color:#a6e22e>MyGreeterHandler</span>))
}
</code></pre></div><h1 id=9-mocking>9. mocking</h1>
<p>유닛 테스트 용도로 사용한다.</p>
<h2 id=예제-코드-3>예제 코드</h2>
<p>countdown_test.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;bytes&#34;</span>
	<span style=color:#e6db74>&#34;reflect&#34;</span>
	<span style=color:#e6db74>&#34;testing&#34;</span>
	<span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>const</span> (
	<span style=color:#a6e22e>write</span> = <span style=color:#e6db74>&#34;write&#34;</span>
	<span style=color:#a6e22e>sleep</span> = <span style=color:#e6db74>&#34;sleep&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>CountdownOperationSpy</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>Calls</span> []<span style=color:#66d9ef>string</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>CountdownOperationSpy</span>) <span style=color:#a6e22e>Sleep</span>() {
	<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Calls</span> = append(<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Calls</span>, <span style=color:#a6e22e>sleep</span>)
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>CountdownOperationSpy</span>) <span style=color:#a6e22e>Write</span>(<span style=color:#a6e22e>p</span> []<span style=color:#66d9ef>byte</span>) (<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
	<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Calls</span> = append(<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Calls</span>, <span style=color:#a6e22e>write</span>)
	<span style=color:#66d9ef>return</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SpyTime</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>durationSlept</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SpyTime</span>) <span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>duration</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span>) {
	<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>durationSlept</span> = <span style=color:#a6e22e>duration</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestCountdown</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;prints 3 to Go!&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>buffer</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>Buffer</span>{}
		<span style=color:#a6e22e>Countdown</span>(<span style=color:#a6e22e>buffer</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>CountdownOperationSpy</span>{})

		<span style=color:#a6e22e>got</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>buffer</span>.<span style=color:#a6e22e>String</span>()
		<span style=color:#a6e22e>want</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;3\n2\n1\nGo!&#34;</span>

		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>got</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>want</span> {
			<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;got %q want %q&#34;</span>, <span style=color:#a6e22e>got</span>, <span style=color:#a6e22e>want</span>)
		}
	})

	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;sleep before every print&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
		<span style=color:#a6e22e>spySleepPrinter</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>CountdownOperationSpy</span>{}
		<span style=color:#a6e22e>Countdown</span>(<span style=color:#a6e22e>spySleepPrinter</span>, <span style=color:#a6e22e>spySleepPrinter</span>)

		<span style=color:#a6e22e>want</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{
			<span style=color:#a6e22e>sleep</span>, <span style=color:#a6e22e>write</span>,
			<span style=color:#a6e22e>sleep</span>, <span style=color:#a6e22e>write</span>,
			<span style=color:#a6e22e>sleep</span>, <span style=color:#a6e22e>write</span>,
			<span style=color:#a6e22e>sleep</span>, <span style=color:#a6e22e>write</span>,
		}

		<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>DeepEqual</span>(<span style=color:#a6e22e>want</span>, <span style=color:#a6e22e>spySleepPrinter</span>) {
			<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;wanted calls %v got %v&#34;</span>, <span style=color:#a6e22e>want</span>, <span style=color:#a6e22e>spySleepPrinter</span>.<span style=color:#a6e22e>Calls</span>)
		}
	})
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestConfigurableSleeper</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>sleepTime</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>

	<span style=color:#a6e22e>spyTime</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>SpyTime</span>{}
	<span style=color:#a6e22e>sleeper</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ConfigurableSleeper</span>{<span style=color:#a6e22e>sleepTime</span>, <span style=color:#a6e22e>spyTime</span>.<span style=color:#a6e22e>Sleep</span>}
	<span style=color:#a6e22e>sleeper</span>.<span style=color:#a6e22e>Sleep</span>()

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>spyTime</span>.<span style=color:#a6e22e>durationSlept</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>sleepTime</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;should have slept for %v but slept for %v&#34;</span>, <span style=color:#a6e22e>sleepTime</span>, <span style=color:#a6e22e>spyTime</span>.<span style=color:#a6e22e>durationSlept</span>)
	}
}
</code></pre></div><p>main.go</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;io&#34;</span>
	<span style=color:#e6db74>&#34;os&#34;</span>
	<span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>const</span> (
	<span style=color:#a6e22e>finalWord</span>      = <span style=color:#e6db74>&#34;Go!&#34;</span>
	<span style=color:#a6e22e>countdownStart</span> = <span style=color:#ae81ff>3</span>
)

<span style=color:#75715e>// Sleeper allows you to put delays.
</span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Sleeper</span> <span style=color:#66d9ef>interface</span> {
	<span style=color:#a6e22e>Sleep</span>()
}

<span style=color:#75715e>// ConfigurableSleeper is an implementation of Sleeper with a defined delay.
</span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ConfigurableSleeper</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>duration</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span>
	<span style=color:#a6e22e>sleep</span>    <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span>)
}

<span style=color:#75715e>// Sleep will pause execution for the defined Duration.
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ConfigurableSleeper</span>) <span style=color:#a6e22e>Sleep</span>() {
	<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>sleep</span>(<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>duration</span>)
}

<span style=color:#75715e>// Countdown prints a countdown from 3 to out with a delay between count provided by Sleeper.
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Countdown</span>(<span style=color:#a6e22e>out</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>, <span style=color:#a6e22e>sleeper</span> <span style=color:#a6e22e>Sleeper</span>) {

	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>countdownStart</span>; <span style=color:#a6e22e>i</span> &gt; <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>--</span> {
		<span style=color:#a6e22e>sleeper</span>.<span style=color:#a6e22e>Sleep</span>()
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintln</span>(<span style=color:#a6e22e>out</span>, <span style=color:#a6e22e>i</span>)
	}

	<span style=color:#a6e22e>sleeper</span>.<span style=color:#a6e22e>Sleep</span>()
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprint</span>(<span style=color:#a6e22e>out</span>, <span style=color:#a6e22e>finalWord</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>sleeper</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>ConfigurableSleeper</span>{<span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>}
	<span style=color:#a6e22e>Countdown</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdout</span>, <span style=color:#a6e22e>sleeper</span>)
}
</code></pre></div>
</div>
<div class="row pl-3 pr-3">
<div class="col-md-6 share-buttons">
</div>
<div class="col-md-6 btn-improve-page">
<a href=https://github.com/SangjunCha-dev/sangjuncha-dev.github.io/edit/main/content/posts/programming/golang/2021-08-02-golang-learn-go-with-tests.md title="이 페이지를 개선" target=_blank rel=noopener>
<i class="fas fa-code-branch"></i>
이 페이지를 개선
</a>
</div>
</div>
<hr>
<div class="row next-prev-navigator">
</div>
<hr>
</div>
</div>
</div>
<a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a>
</section>
<section class=toc-section id=toc-section>
<div class=toc-holder>
<h5 class="text-center pl-3">목차</h5>
<hr>
<div class=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#struct>struct</a></li>
<li><a href=#methods>methods</a></li>
<li><a href=#interface>interface</a></li>
<li><a href=#익명구조>익명구조</a></li>
<li><a href=#예제-코드>예제 코드</a></li>
</ul>
<ul>
<li><a href=#pointer>Pointer</a></li>
<li><a href=#error>Error</a></li>
<li><a href=#예제-코드-1>예제 코드</a></li>
</ul>
<ul>
<li><a href=#map>map</a></li>
<li><a href=#error-1>error</a></li>
<li><a href=#pointer-1>pointer</a></li>
<li><a href=#map-초기화-방법>map 초기화 방법</a></li>
<li><a href=#예제-코드-2>예제 코드</a></li>
</ul>
<ul>
<li><a href=#특징>특징</a></li>
<li><a href=#예제코드>예제코드</a></li>
</ul>
<ul>
<li><a href=#예제-코드-3>예제 코드</a></li>
</ul>
</nav>
</div>
</div>
</section>
</div>
<footer class="container-fluid text-center align-content-center footer pb-2">
<div class="container pt-5">
<div class="row text-left">
<div class="col-md-4 col-sm-12">
<h5>바로가기</h5>
<ul>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#about>About</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#skills>Skills</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#recent-posts>Recent Posts</a>
</li>
</ul>
</div>
<div class="col-md-4 col-sm-12">
<h5>Contact me:</h5>
<ul>
<li><a href=mailto:sangjuncha.dev@gmail.com target=_blank rel=noopener>
<span><i class="fas fa-envelope"></i></span> <span>sangjuncha.dev@gmail.com</span>
</a></li>
</ul>
</div>
</div>
</div>
<hr>
<div class=container>
<div class="row text-left">
<div class=col-md-4>
<a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener>
<img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha
</a>
</div>
<div class="col-md-4 text-center">Copyright 2020. SangjunCha all rights reserved.</div>
<div class="col-md-4 text-right">
<a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18>
</a>
</div>
</div>
</div>
</footer>
<script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>