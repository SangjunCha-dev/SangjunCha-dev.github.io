<!doctype html><html><head><title>[python] 테스트 프레임워크 pytest 사용법</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><meta property="og:title" content="[python] 테스트 프레임워크 pytest 사용법"><meta property="og:description" content="[python] 테스트 프레임워크 pytest 사용법"><meta property="og:type" content="article"><meta property="og:url" content="https://sangjuncha-dev.github.io/posts/programming/python/2022-02-08-python-pytest-guide/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-08T16:33:25+09:00"><meta property="article:modified_time" content="2022-02-08T16:33:25+09:00"><meta name=description content="[python] 테스트 프레임워크 pytest 사용법"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/>Sangjun 개발 블로그</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>게시글</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/posts/algorithm/>algorithm</a><ul><li><a href=/posts/algorithm/leetcode/ title=leetcode>leetcode</a></li><li><a href=/posts/algorithm/programmers/ title=programmers>programmers</a></li></ul></li><li><a href=/posts/db/ title=db>db</a></li><li><a href=/posts/docker/ title=docker>docker</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/framework/>framework</a><ul><li><a href=/posts/framework/django/ title=django>django</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/os/>os</a><ul><li><a href=/posts/os/linux/ title=linux>linux</a></li><li><a href=/posts/os/windows/ title=windows>windows</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/programming/>programming</a><ul class=active><li><a href=/posts/programming/golang/ title=golang>golang</a></li><li><a class=active href=/posts/programming/python/ title=python>python</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://sangjuncha-dev.github.io/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/author_hubdaa05e9d050aba742615dd0c3c3a3a1_51368_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>차상준</h5><p>February 8, 2022</p></div><div class=title><h1>[python] 테스트 프레임워크 pytest 사용법</h1></div><div class=post-content id=post-content><hr><h2 id=1-개요-및-설정>1. 개요 및 설정</h2><p>pytest는 에러 없는 좋은 코드를 개발만들기 위한 목적으로 개발된 Python 테스트 프레임워크이다.</p><p>pytest 특징</p><ul><li>다른 testing 라이브러리에 비해 사용법이 간단하다.</li><li>테스트를 병렬로 실행할 수 있다.</li><li>특정 테스트를 스킵할 수 있다.</li><li>다양한 서드 파트 라이브러리들이 있다.</li></ul><p>설치</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install -U pytest
</span></span></code></pre></div><hr><h2 id=2-기본-사용법>2. 기본 사용법</h2><h3 id=21-기본-테스트>2.1. 기본 테스트</h3><p>test_sample.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 테스트 대상 기능</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>inc</span>(x):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 테스트 실행 함수</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_answer1</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> inc(<span style=color:#ae81ff>3</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_answer2</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> inc(<span style=color:#ae81ff>3</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span></code></pre></div><p>pytest 실행 결과</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; pytest test_sample.py
</span></span><span style=display:flex><span><span style=color:#f92672>=======================</span> test session starts <span style=color:#f92672>========================</span>
</span></span><span style=display:flex><span>platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
</span></span><span style=display:flex><span>rootdir: D:<span style=color:#ae81ff>\w</span>orkspace<span style=color:#ae81ff>\b</span>log<span style=color:#ae81ff>\p</span>ython<span style=color:#ae81ff>\p</span>ython-pytest
</span></span><span style=display:flex><span>collected <span style=color:#ae81ff>2</span> items
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test_sample.py F.                                             <span style=color:#f92672>[</span>100%<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>=============================</span> FAILURES <span style=color:#f92672>=============================</span> 
</span></span><span style=display:flex><span>___________________________ test_answer1 ___________________________ 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    def test_answer1<span style=color:#f92672>()</span>:
</span></span><span style=display:flex><span>&gt;       assert inc<span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>E       assert 4 <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>E        +  where 4 <span style=color:#f92672>=</span> inc<span style=color:#f92672>(</span>3<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test_sample.py:7: AssertionError
</span></span><span style=display:flex><span><span style=color:#f92672>=====================</span> short test summary info <span style=color:#f92672>======================</span> 
</span></span><span style=display:flex><span>FAILED test_sample.py::test_answer1 - assert 4 <span style=color:#f92672>==</span> 5
</span></span><span style=display:flex><span><span style=color:#f92672>===================</span> <span style=color:#ae81ff>1</span> failed, <span style=color:#ae81ff>1</span> passed in 0.07s <span style=color:#f92672>====================</span>
</span></span></code></pre></div><p>테스트 코드에서 의도한대로 <code>inc(3) == 5</code> 부분에서 에러가 발생한다.</p><h3 id=22-예외-테스트>2.2. 예외 테스트</h3><p>test_sample_raises.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>SystemExit</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_mytest</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> pytest<span style=color:#f92672>.</span>raises(<span style=color:#a6e22e>SystemExit</span>):
</span></span><span style=display:flex><span>        f()
</span></span></code></pre></div><pre tabindex=0><code>&gt; pytest test_sample_raises.py 
======================= test session starts ========================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 1 item                                                     

test_sample_raises.py .                                       [100%] 

======================== 1 passed in 0.01s ========================= 
</code></pre><h3 id=22-명칭-규약>2.2. 명칭 규약</h3><ul><li>파일 이름<ul><li><code>test_*.py</code> 또는 <code>*_test.py</code> 형식으로 지정한다.</li><li><code>*_test.py</code> 는 python 3.8 버전 이상부터 적용된다.</li></ul></li><li>클래스 명칭<ul><li><code>class Test*</code> 형식으로 지정한다.</li></ul></li><li>클래스 메서드 및 함수 명칭<ul><li><code>def test_*</code> 형식으로 지정한다.</li></ul></li></ul><h3 id=23-실행-방법>2.3. 실행 방법</h3><ul><li><p>해당 작업디렉토리 안에 모든 테스트 파일 실행</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; pytest
</span></span></code></pre></div></li><li><p>특정 디렉토리 내 테스트 파일 실행</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; pytest tests/
</span></span></code></pre></div></li><li><p>특정 테스트 파일 실행</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; pytest test_sample.py
</span></span></code></pre></div></li></ul><h3 id=24-테스트-실행시-출력되는-정보>2.4. 테스트 실행시 출력되는 정보</h3><ul><li>플랫폼 정보: python 버전, pytest 라이브러리 버전</li><li>테스트 실행 디렉토리</li><li>테스트 파일이름 및 진행률</li><li>테스트 실패 파일 및 코드 정보</li><li>총 테스트 케이스 개수 및 실행시간 정보</li></ul><hr><h2 id=3-테스트-디렉토리-구조>3. 테스트 디렉토리 구조</h2><p>프로젝트의 효율적인 관리를 위해 소스코드, 테스트 코드 파일을 분리하여 저장한다.
테스트 코드는 보통 <code>tests/</code> 디렉토리에서 관리한다.</p><pre tabindex=0><code>project/
    src/
        __init__.py
        calculator.py
    tests/
        __init__.py
        test_calculator.py
</code></pre><blockquote><p>python 디렉토리안에 <code>__init__.py</code> 파일이 없을 경우<br><code>ModuleNotFoundError</code> 에러가 발생할 수 있다.</p></blockquote><hr><h2 id=4-pytest-fixtures>4. pytest fixtures</h2><p><code>fixtures</code> 란?</p><ul><li>테스트 프로세스를 초기화하여 시스템의 모든 전제 조건을 충족하도록 시스템을 설정하는 것<ul><li>데이터 베이스 등</li></ul></li><li>같은 설정의 테스트를 쉽게 반복적으로 수행할 수 있도록 도와주는 것</li></ul><p><code>pytest fixtures</code>는 <code>python decorator</code>형식으로 사용한다.</p><p>src/calculator.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Calculator</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add</span>(self, x, y):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> x <span style=color:#f92672>+</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sub</span>(self, x, y):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> x <span style=color:#f92672>-</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>mul</span>(self, x, y):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>div</span>(self, x, y):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> x <span style=color:#f92672>/</span> y
</span></span></code></pre></div><p>tests/test_calculator.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> src.calculator <span style=color:#f92672>import</span> Calculator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_sub</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_mul</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>mul(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>mul(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_div</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>div(<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>div(<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>3</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=41-pytestfixture>4.1. @pytest.fixture</h3><p>테스트코드를 작성하다 보면 클래스 호출 등 테스트에 반복 사용되는 코드가 존재한다.
이러한 코드 중복성을 문제를 해결하기 위한 테스트 함수 실행전 실행되는 함수를 <code>@pytest.fixture</code> 데코레이터로 선언한다.</p><p>tests/test_calculator_fixture_v1.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> src.calculator <span style=color:#f92672>import</span> Calculator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>fixture
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculator</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calculator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_sub</span>(calculator):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span></code></pre></div><p>사전에 <code>fixture 함수</code>를 정의하고 <code>test_*</code> 함수의 파라미터로 사용하여 클래스 선언등의 초기화를 진행할 수 있다.</p><h3 id=42-conftestpy>4.2. conftest.py</h3><p>여러 test 파일에 공통적으로 fixture 함수가 선언하면 중복된 코드를 작성하게 된다.
이러한 문제는 별도의 <code>conftest.py</code> 파일에 fixture 함수를 선언하여 해결할 수 있다.</p><p>tests/conftest.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> src.calculator <span style=color:#f92672>import</span> Calculator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>fixture
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculator</span>():
</span></span><span style=display:flex><span>    calculator <span style=color:#f92672>=</span> Calculator()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calculator
</span></span></code></pre></div><p>tests/test_calculator_fixture_v2.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_sub</span>(calculator):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>sub(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span></code></pre></div><hr><h2 id=5-parameterize>5. Parameterize</h2><p>테스트 케이스마다 테스트값을 포함한 테스트 함수를 호출하는 코드도 중복 작성하는 부분이다. 이를 위한 테스트 입력값과 결과값을 <code>@pytest.mark.parametrize(argnames, argvalues)</code> 데코테이터로 작성하여 테스트 코드를 간결하게 만들 수 있다.</p><p>tests/test_calculator_parametrize.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, result&#34;</span>,
</span></span><span style=display:flex><span>    [(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator, a, b, result):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> result
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, expected&#34;</span>,
</span></span><span style=display:flex><span>    [(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add_fail</span>(calculator, a, b, expected):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>!=</span> expected
</span></span></code></pre></div><p>실행 결과</p><pre tabindex=0><code>&gt; pytest tests\test_calculator_parametrize.py
======================= test session starts ========================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 4 items

tests\test_calculator_parametrize.py ....                     [100%] 

======================== 4 passed in 0.03s =========================
</code></pre><p>기존 테스트와의 차이점은 테스트 함수안에서 여러개의 테스트를 진행한게 아니라 각각의 테스트 케이스들이 별도로 실행된다.</p><hr><h2 id=6-xfail>6. xfail</h2><p><code>@pytest.mark.xfail</code>는 테스트 실패가 예상되는 함수에 지정하는 데코레이터이다. <code>reason</code> 파라미터는 작성자가 실패가 예상되는 이유를 작성하는 부분이다.</p><p>tests/test_calculator_xfail_v1.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, expected&#34;</span>,
</span></span><span style=display:flex><span>    [(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add_fail_parametrize</span>(calculator, a, b, expected):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>!=</span> expected
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail(reason<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;wrong result&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, expected&#34;</span>,
</span></span><span style=display:flex><span>    [(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>7</span>)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add_fail_xfail</span>(calculator, a, b, expected):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> expected
</span></span></code></pre></div><p>실행결과</p><pre tabindex=0><code>&gt;pytest tests\test_calculator_xfail_v1.py
======================= test session starts ========================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 5 items                                                    

tests\test_calculator_xfail_v1.py ..xxX                       [100%]

============= 2 passed, 2 xfailed, 1 xpassed in 0.07s ============== 
</code></pre><ul><li><code>passed</code> : 에러없이 테스트케이스 통과한 개수</li><li><code>xfailed</code> : xfail로 지정한 테스트케이스 중 정상적으로 실패한 개수</li><li><code>xpassed</code> : xfail로 지정한 테스트케이스 중 의도하지않은 성공한 개수</li></ul><hr><h2 id=7-param>7. param</h2><p><code>pytest.param</code>을 사용하여 테스트 케이스별로 옵션을 지정할 수 있다.</p><p>tests/test_calculator_param_v1.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, expected&#34;</span>,
</span></span><span style=display:flex><span>    [pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail),
</span></span><span style=display:flex><span>     pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add_fail_xfail</span>(calculator, a, b, expected):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> expected
</span></span></code></pre></div><h3 id=71-성공실패-케이스-통합>7.1. 성공/실패 케이스 통합</h3><p>위에서 학습한 <code>pytest.param xfail</code>을 사용하면 하나의 테스트 함수에서 성공과 실패 케이스 모두 테스트할 수 있다.</p><p>tests/test_calculator_param_v2.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a, b, result&#34;</span>,
</span></span><span style=display:flex><span>    [(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>     (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>     pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail),
</span></span><span style=display:flex><span>     pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail)]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator, a, b, result):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> result
</span></span></code></pre></div><h3 id=72-테스트-케이스-전역변수>7.2. 테스트 케이스 전역변수</h3><p>가독성 및 재사용성을 위해 테스트케이스를 별도의 변수로 지정하여 사용할 수 있다.</p><p>tests/test_calculator_param_v3.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_test_data <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>    (<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail),
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail),
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(<span style=color:#e6db74>&#34;a, b, result&#34;</span>, add_test_data)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator, a, b, result):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> result
</span></span></code></pre></div><hr><h2 id=8-설명문-추가---id>8. 설명문 추가 - id</h2><p>각 테스트 케이스별로 id를 작성하여 해당 케이스의 의미를 작성할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_test_data <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1 add 2 is 3&#34;</span>),
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2 add 2 is 4&#34;</span>),
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail, id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1 add 2 is not 4&#34;</span>),
</span></span><span style=display:flex><span>    pytest<span style=color:#f92672>.</span>param(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, marks<span style=color:#f92672>=</span>pytest<span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>xfail, id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2 add 2 is not 6&#34;</span>),
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>parametrize(<span style=color:#e6db74>&#34;a, b, result&#34;</span>, add_test_data)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(calculator, a, b, result):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> calculator<span style=color:#f92672>.</span>add(a, b) <span style=color:#f92672>==</span> result
</span></span></code></pre></div><h2 id=9-skip>9. skip</h2><p>테스트 함수를 사용하지 않을 때 <code>@pytest.mark.skip</code> 데코레이터를 사용함으로 테스트를 생략할 수 있다.</p><p>다른 사용법으로 테스트가 조건을 만족할 경우 <code>pytest.skip</code>함수로 skip 처리가 가능하다.</p><p>tests/test_skip.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>skip(reason<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;no way of currently testing this&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_skip_v1</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_skip_v2</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        pytest<span style=color:#f92672>.</span>skip(reason<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;no way of currently testing this&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>실행 결과</p><pre tabindex=0><code>&gt; pytest tests\test_skip.py
======================= test session starts =======================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 2 items

tests\test_skip.py ss                                        [100%] 

======================= 2 skipped in 0.02s ======================== 
</code></pre><ul><li><code>skipped</code> : 생략된 테스트 개수</li></ul><h3 id=91-skipif>9.1. skipif</h3><p>플랫폼이나 라이브러리 설치 유무, 버전등에 따라서 skip이 필요한 경우가 있다.</p><p><code>@pytest.mark.skipif(조건문)</code> 데코레이터로 조건에 부합될 경우에만 테스트 함수를 생략할 수 있다.</p><p>tests/test_skipif.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>skipif(sys<span style=color:#f92672>.</span>version_info <span style=color:#f92672>&lt;</span> (<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>7</span>), reason<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;requires python 3.7 or higher&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_skipif_v1</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ImportError</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest</span><span style=color:#f92672>.</span>mark<span style=color:#f92672>.</span>skipif(<span style=color:#e6db74>&#39;numpy&#39;</span> <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> sys<span style=color:#f92672>.</span>modules, reason<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;requires the Numpy library&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_skipif_v2</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>실행 결과</p><ul><li>test_skipif_v1 함수 : 현재 python 버전이 3.8이므로 생략되지 않고 테스트 실행됨</li><li>test_skipif_v2 함수 : numpy 라이브러리 설치가 되지 않아 ImportError가 발생하고 테스트 생략됨</li></ul><pre tabindex=0><code>&gt; pytest tests\test_skipif.py
======================= test session starts =======================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 2 items

tests\test_skipif.py .s                                      [100%] 

================== 1 passed, 1 skipped in 0.02s ===================
</code></pre><hr><h2 id=10-testclass>10. TestClass</h2><p>테스트 함수를 클래스로 그룹화 할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestCalcultor</span>:
</span></span><span style=display:flex><span>    value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>(self):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>value <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>assert</span> self<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_result</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>assert</span> self<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>실행 결과</p><p>클래스 내에 각 테스트는 각각의 고유한 클래스 인스턴스를 가지고 있어 self 변수값이 공유되지 않는다.</p><pre tabindex=0><code>&gt; pytest tests\test_class.py
======================= test session starts =======================
platform win32 -- Python 3.8.10, pytest-7.0.0, pluggy-1.0.0
rootdir: D:\workspace_go\blog\python\python-pytest
collected 2 items

tests\test_class.py ..                                       [100%] 

======================== 2 passed in 0.03s ======================== 
</code></pre><hr><h2 id=11-예시코드-git>11. 예시코드 Git</h2><p><a href=https://github.com/SangjunCha-dev/blog/tree/main/python/python-pytest>python-pytest</a></p><hr><h2 id=참고reference>참고(Reference)</h2><ul><li><a href=https://docs.pytest.org/en/latest/>pytest docs</a></li><li><a href=https://pytest-xdist.readthedocs.io/en/latest/>pytest-xdist docs</a></li><li><a href=https://www.bangseongbeom.com/unittest-vs-pytest.html>unittest vs pytest</a></li><li><a href=https://github.com/yeongseon/PyCon-KR-2019>PyCon-KR-2019 - pytest</a></li><li><a href=https://stackoverflow.com/questions/38442897/how-do-i-disable-a-test-using-pytest>How do I disable a test using pytest?</a></li></ul></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/SangjunCha-dev/sangjuncha-dev.github.io/edit/main/content/posts/programming/python/2022-02-08-python-pytest-guide.md title="이 페이지를 개선" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
이 페이지를 개선</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">목차</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#1-개요-및-설정>1. 개요 및 설정</a></li><li><a href=#2-기본-사용법>2. 기본 사용법</a><ul><li><a href=#21-기본-테스트>2.1. 기본 테스트</a></li><li><a href=#22-예외-테스트>2.2. 예외 테스트</a></li><li><a href=#22-명칭-규약>2.2. 명칭 규약</a></li><li><a href=#23-실행-방법>2.3. 실행 방법</a></li><li><a href=#24-테스트-실행시-출력되는-정보>2.4. 테스트 실행시 출력되는 정보</a></li></ul></li><li><a href=#3-테스트-디렉토리-구조>3. 테스트 디렉토리 구조</a></li><li><a href=#4-pytest-fixtures>4. pytest fixtures</a><ul><li><a href=#41-pytestfixture>4.1. @pytest.fixture</a></li><li><a href=#42-conftestpy>4.2. conftest.py</a></li></ul></li><li><a href=#5-parameterize>5. Parameterize</a></li><li><a href=#6-xfail>6. xfail</a></li><li><a href=#7-param>7. param</a><ul><li><a href=#71-성공실패-케이스-통합>7.1. 성공/실패 케이스 통합</a></li><li><a href=#72-테스트-케이스-전역변수>7.2. 테스트 케이스 전역변수</a></li></ul></li><li><a href=#8-설명문-추가---id>8. 설명문 추가 - id</a></li><li><a href=#9-skip>9. skip</a><ul><li><a href=#91-skipif>9.1. skipif</a></li></ul></li><li><a href=#10-testclass>10. TestClass</a></li><li><a href=#11-예시코드-git>11. 예시코드 Git</a></li><li><a href=#참고reference>참고(Reference)</a></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>바로가기</h5><ul><li class=nav-item><a class=smooth-scroll href=https://sangjuncha-dev.github.io#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://sangjuncha-dev.github.io#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://sangjuncha-dev.github.io#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:sangjuncha.dev@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>sangjuncha.dev@gmail.com</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Copyright 2020. SangjunCha all rights reserved.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>