<!doctype html><html>
<head>
<title>models</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=/css/bootstrap.min.css>
<link rel=stylesheet href=/css/layouts/main.css>
<link rel=stylesheet href=/css/navigators/navbar.css>
<link rel=stylesheet href=/css/plyr.css>
<link rel=stylesheet href=/css/flag-icon.min.css>
<link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css>
<meta property="og:title" content="models">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://sangjuncha-dev.github.io/tags/models/">
<link rel=stylesheet href=/css/layouts/list.css>
<link rel=stylesheet href=/css/navigators/sidebar.css>
<link rel=stylesheet href=/css/style.css>
</head>
<body data-spy=scroll data-target=#TableOfContents data-offset=80>
<div class="container-fluid bg-dimmed wrapper">
<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
<div class=container>
<button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span>
</button>
<a class=navbar-brand href=/>
Sangjun 개발 블로그</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse lang-selector" id=top-nav-items>
<ul class="navbar-nav ml-auto">
</ul>
</div>
</div>
</nav>
<section class=sidebar-section id=sidebar-section>
<div class=sidebar-holder>
<div class=sidebar id=sidebar>
<form class=mx-auto method=get action=/search>
<input type=text name=keyword placeholder=Search data-search id=search-box>
</form>
<div class=sidebar-tree>
<ul class=tree id=tree>
<li id=list-heading><a href=/tags data-filter=all>태그</a></li>
<div class="subtree taxonomy-terms">
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/algorithm/ data-taxonomy-term=algorithm><span class=taxonomy-label>algorithm</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/db/ data-taxonomy-term=db><span class=taxonomy-label>db</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/django/ data-taxonomy-term=django><span class=taxonomy-label>django</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/docker/ data-taxonomy-term=docker><span class=taxonomy-label>docker</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/go/ data-taxonomy-term=go><span class=taxonomy-label>go</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/gopacket/ data-taxonomy-term=gopacket><span class=taxonomy-label>gopacket</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/learning/ data-taxonomy-term=learning><span class=taxonomy-label>learning</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/leetcode/ data-taxonomy-term=leetcode><span class=taxonomy-label>leetcode</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/library/ data-taxonomy-term=library><span class=taxonomy-label>library</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/linux/ data-taxonomy-term=linux><span class=taxonomy-label>linux</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/mariadb/ data-taxonomy-term=mariadb><span class=taxonomy-label>mariadb</span></a></li>
<li><a class="taxonomy-term active" href=https://sangjuncha-dev.github.io/tags/models/ data-taxonomy-term=models><span class=taxonomy-label>models</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/mssql/ data-taxonomy-term=mssql><span class=taxonomy-label>mssql</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/nfs/ data-taxonomy-term=nfs><span class=taxonomy-label>nfs</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/numpy/ data-taxonomy-term=numpy><span class=taxonomy-label>numpy</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/opencv/ data-taxonomy-term=opencv><span class=taxonomy-label>opencv</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/postgredb/ data-taxonomy-term=postgredb><span class=taxonomy-label>postgredb</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/programmers/ data-taxonomy-term=programmers><span class=taxonomy-label>programmers</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/python/ data-taxonomy-term=python><span class=taxonomy-label>python</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/scraper/ data-taxonomy-term=scraper><span class=taxonomy-label>scraper</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/sniff/ data-taxonomy-term=sniff><span class=taxonomy-label>sniff</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/sql/ data-taxonomy-term=sql><span class=taxonomy-label>sql</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/sqlcmd/ data-taxonomy-term=sqlcmd><span class=taxonomy-label>sqlcmd</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/windows/ data-taxonomy-term=windows><span class=taxonomy-label>windows</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/windows10/ data-taxonomy-term=windows10><span class=taxonomy-label>windows10</span></a></li>
<li><a class=taxonomy-term href=https://sangjuncha-dev.github.io/tags/wsl/ data-taxonomy-term=wsl><span class=taxonomy-label>wsl</span></a></li>
</div>
</ul>
</div>
</div>
</div>
</section>
<section class=content-section id=content-section>
<div class="content container-fluid" id=content>
<div class="container-fluid post-card-holder" id=post-card-holder>
<div class=post-card>
<a href=/posts/framework/django/2021-04-20-django-model-to-json-response/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/images/default-hero.jpg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Django json 데이터 반환하기</h5>
<p class="card-text post-summary">api 서버 등 json 데이터로 통신하는 서버에서 사용할 수 있는 예제이다.
사전 설정 프로젝트 생성 후 user 앱의 User 모델을 생성한다.
임의의 user 데이터를 2개 등록한다.
models.py
class User(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=20, unique=True) 사용 예시 QuerySet(Model Instance)을 json형태로 변환할 경우 .all() serializers.serialize(&lsquo;json&rsquo;, value_name) 함수를 사용하여 json 형태로 변환시킨다.
views.py
from django.core import serializers res_data = User.objects.all() # &lt;QuerySet [&lt;User: User object (1)>, &lt;User: User object (2)>]> res_data = serializers.</p>
</div>
<div class=card-footer>
<span class=float-left>April 20, 2021</span>
<a href=/posts/framework/django/2021-04-20-django-model-to-json-response/ class="float-right btn btn-outline-info btn-sm">Read</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/framework/django/2021-04-07-django-models-relations-object-call/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/images/default-hero.jpg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Django model 참조 객체 호출하기</h5>
<p class="card-text post-summary">title: author: Sangjun Cha date: 2021-04-07 +0900 categories: [Django, Models] tags: [django, models] pin: false 정참조와 역참조 객체 호출 데이터베이스의 임의의 테이블로 User, Occupation 생성한다.
두 테이블은 User 모델의 객체가 Occupation 모델의 객체를 N:1 참조관계를 가진다.
models.py 설정
class User(models.Model): name = models.CharField(max_length=50) age = models.IntegerField() job = models.ForeignKey('Occupation', on_delete=models.CASCADE) class Occupation(models.Model): name = models.CharField(max_length=50) 정참조 객체 호출하기 user1 객체가 Occupation 모델을 참조키(ForeignKey)로 정참조하여, Occupation 모델의 속성을 사용할 수 있다.</p>
</div>
<div class=card-footer>
<span class=float-left>April 7, 2021</span>
<a href=/posts/framework/django/2021-04-07-django-models-relations-object-call/ class="float-right btn btn-outline-info btn-sm">Read</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/framework/django/2021-04-07-django-dynamic-model-and-table-create/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/images/default-hero.jpg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Django 동적 모델 및 테이블 생성</h5>
<p class="card-text post-summary">Django 동적 모델 및 테이블 생성 django는 makemigrations, migrate 명령어를 통하여 테이블 생성한다.
이때 웹서버는 실행중일 경우 중단하고 다시 재시작한다.
운영환경에 따라서 웹서버가 중단되지 않고 운영이 필요한경우에는 위의 방법이 아닌 동적 모델 및 테이블 생성방법이 필요하다.
사용 방법 상속받을 추상모델 작성 models.py
from django.db import models class Board(models.Model): title = models.CharField(max_length=100) contents = models.CharField(max_length=500) class Meta: abstract = True 동적 모델 생성 및 삭제 from .models import Board TABLE_MAP = {} def create_model(name: str): ''' 동적 모델 생성 ''' baseclass = Board tablename = board2 # attrs 를 dict 형태로 지정한다.</p>
</div>
<div class=card-footer>
<span class=float-left>April 7, 2021</span>
<a href=/posts/framework/django/2021-04-07-django-dynamic-model-and-table-create/ class="float-right btn btn-outline-info btn-sm">Read</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/framework/django/2021-04-06-django-queryset-object-access/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/images/default-hero.jpg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Django QuerySet 객체 접근방식 및 조회</h5>
<p class="card-text post-summary">queryset 단일객체와 다중객체 접근방법 QuerySet 이란? Database에서 응답받은 결과 목록(list)
Python 코드가 SQL 구문으로 맵핑(mapping)되고 DB로 전달하여 받은 응답값을 QuerySet 자료형으로 반환한다.
사전설정 django version : 3.2
models.py
from django.db import models class User(): name = models.CharField(max_length=20) age = models.models.PositiveSmallIntegerField() >>> python manage.py shell #shell 실행 >>> from user.models import User #모델클래스 임포트 >>> user1 = User(name='Foo', age=15) # 데이터추가 >>> user1.save() # 데이터 저장 >>> user2 = User(name='Bar', age=20) # 데이터추가 >>> user2.</p>
</div>
<div class=card-footer>
<span class=float-left>April 6, 2021</span>
<a href=/posts/framework/django/2021-04-06-django-queryset-object-access/ class="float-right btn btn-outline-info btn-sm">Read</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/framework/django/2021-03-31-django-models-autoonetoonefield/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/images/default-hero.jpg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Django models.AutoOneToOneField 사용법</h5>
<p class="card-text post-summary">model 상속할때 테이블 컬럼 데이터 자동 생성방법
라이브러리 설치 pip install django-annoying models 설정 django의 models.OneToOneField는 데이터 변경없이(default 설정) 저장하면 해당 데이터(row)가 생성되지않음
models.AutoOneToOneField는 데이터가 default값이어도 데이터(row) 생성됨
from annoying.fields import AutoOneToOneField # User모델 Save에서 제어 class User(models.Model): name = models.CharField(max_length=30) def save(self): is_new = False if self.pk is None: is_new = True if is_new: Profile.objects.create(user=self) class Profile(models.Model): user = AutoOneToOneField(User, primary_key=True) home_page = models.URLField(max_length=255, blank=True) icq = models.IntegerField(blank=True, null=True) 참고사항 문제점 : TypeError: __init__() missing 1 required positional argument: 'on_delete' 에러 발생</p>
</div>
<div class=card-footer>
<span class=float-left>March 31, 2021</span>
<a href=/posts/framework/django/2021-03-31-django-models-autoonetoonefield/ class="float-right btn btn-outline-info btn-sm">Read</a>
</div>
</div>
</a>
</div>
</div>
<div class=paginator>
</div>
</div>
</section>
</div>
<footer class="container-fluid text-center align-content-center footer pb-2">
<div class="container pt-5">
<div class="row text-left">
<div class="col-md-4 col-sm-12">
<h5>바로가기</h5>
<ul>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#about>About</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#skills>Skills</a>
</li>
<li class=nav-item>
<a class=smooth-scroll href=https://sangjuncha-dev.github.io#recent-posts>Recent Posts</a>
</li>
</ul>
</div>
<div class="col-md-4 col-sm-12">
<h5>Contact me:</h5>
<ul>
<li><a href=mailto:sangjuncha.dev@gmail.com target=_blank rel=noopener>
<span><i class="fas fa-envelope"></i></span> <span>sangjuncha.dev@gmail.com</span>
</a></li>
</ul>
</div>
</div>
</div>
<hr>
<div class=container>
<div class="row text-left">
<div class=col-md-4>
<a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener>
<img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha
</a>
</div>
<div class="col-md-4 text-center">© 2020 Copyright.</div>
<div class="col-md-4 text-right">
<a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18>
</a>
</div>
</div>
</div>
</footer>
<script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=/js/list.js></script>
</body>
</html>